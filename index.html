<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MH SPORTS - Live, Upcoming & Recent</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #050a14; color: white; font-family: 'Inter', sans-serif; }
        .tab-btn { padding: 10px 20px; font-weight: bold; border-radius: 8px; transition: 0.3s; cursor: pointer; }
        .tab-btn.active { background-color: #2563eb; color: white; }
        .tab-btn.inactive { background-color: #1e293b; color: #94a3b8; }
        .match-card { background: linear-gradient(145deg, #0f172a, #1e293b); border: 1px solid #334155; border-radius: 16px; margin-bottom: 16px; overflow: hidden; }
        .live-pulse { width: 8px; height: 8px; background: #ef4444; border-radius: 50%; display: inline-block; margin-right: 5px; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    <div class="text-center py-6 bg-[#0f172a] border-b border-gray-800 sticky top-0 z-50 shadow-2xl">
        <h1 class="text-2xl font-black text-blue-500 uppercase tracking-widest">MH SPORTS</h1>
        <div class="flex justify-center space-x-2 mt-4 px-2">
            <div id="tab-live" onclick="filterMatches('live')" class="tab-btn active text-xs">LIVE (0)</div>
            <div id="tab-upcoming" onclick="filterMatches('upcoming')" class="tab-btn inactive text-xs">UPCOMING</div>
            <div id="tab-recent" onclick="filterMatches('recent')" class="tab-btn inactive text-xs">RECENT</div>
        </div>
    </div>

    <div class="container mx-auto p-4 max-w-xl" id="match-list">
        <div class="text-center py-20 text-gray-500">ম্যাচ ডেটা লোড হচ্ছে...</div>
    </div>

    <script>
        let allMatches = [];
        const api = "https://api.cricfys.one/api/v2/live_matches";
        const proxy = "https://corsproxy.io/?";

        async function fetchAllData() {
            try {
                const res = await fetch(proxy + encodeURIComponent(api));
                const data = await res.json();
                allMatches = data.data || [];
                filterMatches('live'); // ডিফল্টভাবে লাইভ ম্যাচ দেখাবে
            } catch (e) {
                document.getElementById('match-list').innerHTML = "<p class='text-center text-red-500'>সার্ভার সমস্যা! রিফ্রেশ করুন।</p>";
            }
        }

        function filterMatches(type) {
            // ট্যাব কালার আপডেট
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.replace('active', 'inactive');
            });
            document.getElementById(`tab-${type}`).classList.replace('inactive', 'active');

            const list = document.getElementById('match-list');
            list.innerHTML = "";

            let filtered = [];
            if (type === 'live') filtered = allMatches.filter(m => m.is_live == 1);
            else if (type === 'upcoming') filtered = allMatches.filter(m => m.is_live == 0);
            else filtered = allMatches.filter(m => m.is_live == 2); // ধরি ২ মানে রিসেন্ট

            document.getElementById('tab-live').innerText = `LIVE (${allMatches.filter(m => m.is_live == 1).length})`;

            if (filtered.length === 0) {
                list.innerHTML = `<div class='text-center py-20 text-gray-400 font-bold'>এই মুহূর্তে কোনো ${type} ম্যাচ নেই।</div>`;
                return;
            }

            filtered.forEach(m => {
                list.innerHTML += `
                <div class="match-card shadow-lg">
                    <div class="bg-black/20 px-4 py-2 flex justify-between items-center border-b border-gray-700">
                        <span class="text-[10px] font-bold text-gray-400 uppercase">${m.title}</span>
                        ${m.is_live == 1 ? '<span class="text-red-500 text-[10px] font-bold flex items-center"><i class="live-pulse"></i> LIVE</span>' : '<span class="text-blue-400 text-[10px] font-bold uppercase italic">Upcoming</span>'}
                    </div>
                    <div class="p-5 flex justify-between items-center">
                        <div class="text-center w-5/12">
                            <img src="${m.team_a_img}" class="w-14 h-14 mx-auto rounded-full border-2 border-gray-700 p-1 mb-2 bg-gray-900">
                            <p class="text-xs font-black uppercase">${m.team_a}</p>
                        </div>
                        <div class="text-center">
                            <p class="text-lg font-black text-gray-600 italic leading-none">VS</p>
                        </div>
                        <div class="text-center w-5/12">
                            <img src="${m.team_b_img}" class="w-14 h-14 mx-auto rounded-full border-2 border-gray-700 p-1 mb-2 bg-gray-900">
                            <p class="text-xs font-black uppercase">${m.team_b}</p>
                        </div>
                    </div>
                    <div class="px-4 pb-4">
                        <a href="player.html?url=${btoa(m.stream_url)}" class="block w-full bg-blue-600 hover:bg-blue-700 text-center py-3 rounded-xl font-bold text-sm transition-all shadow-md">WATCH NOW</a>
                    </div>
                </div>`;
            });
        }

        fetchAllData();
        setInterval(fetchAllData, 60000); // প্রতি মিনিটে অটো আপডেট হবে
    </script>
</body>
</html>
