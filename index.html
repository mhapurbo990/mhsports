<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MH SPORTS</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#050a14] text-white font-sans">
    <div class="text-center py-6 bg-[#111827] border-b border-gray-800 shadow-lg">
        <h1 class="text-3xl font-black text-blue-500 uppercase tracking-tighter">MH SPORTS</h1>
    </div>

    <div class="container mx-auto p-4 max-w-xl" id="match-list">
        <div class="text-center py-20 text-gray-500 animate-pulse">ম্যাচ খোঁজা হচ্ছে...</div>
    </div>

    <script>
        async function fetchMatches() {
            const api = "https://api.cricfys.one/api/v2/live_matches";
            // ৩টি আলাদা প্রক্সি ট্রাই করবে যাতে কোনোভাবেই মিস না হয়
            const proxies = [
                "https://corsproxy.io/?",
                "https://api.allorigins.win/get?url=",
                "https://thingproxy.freeboard.io/fetch/"
            ];

            const list = document.getElementById('match-list');

            for (let proxy of proxies) {
                try {
                    const target = proxy.includes("allorigins") ? proxy + encodeURIComponent(api) : proxy + api;
                    const res = await fetch(target);
                    let data = await res.json();
                    
                    // AllOrigins এর জন্য ডাটা ফরম্যাট আলাদা হয়
                    let matches = proxy.includes("allorigins") ? JSON.parse(data.contents).data : data.data;

                    if (matches && matches.length > 0) {
                        list.innerHTML = "";
                        matches.forEach(m => {
                            list.innerHTML += `
                            <div class="bg-[#0f172a] border border-gray-800 rounded-xl p-4 mb-4 shadow-md">
                                <p class="text-[10px] text-gray-500 font-bold mb-3 uppercase tracking-widest">${m.title}</p>
                                <div class="flex justify-between items-center mb-5">
                                    <div class="text-center w-1/3">
                                        <img src="${m.team_a_img}" class="w-12 h-12 mx-auto rounded-full border border-gray-700 p-1">
                                        <p class="text-[11px] font-bold mt-2">${m.team_a}</p>
                                    </div>
                                    <div class="text-blue-500 font-black italic text-xl">VS</div>
                                    <div class="text-center w-1/3">
                                        <img src="${m.team_b_img}" class="w-12 h-12 mx-auto rounded-full border border-gray-700 p-1">
                                        <p class="text-[11px] font-bold mt-2">${m.team_b}</p>
                                    </div>
                                </div>
                                <a href="player.html?url=${btoa(m.stream_url)}" class="block w-full bg-blue-600 hover:bg-blue-700 text-center py-3 rounded-lg font-extrabold transition-all">WATCH LIVE</a>
                            </div>`;
                        });
                        return; // ডাটা পেয়ে গেলে লুপ বন্ধ হবে
                    }
                } catch (e) { console.log("Proxy failed, trying next..."); }
            }
            list.innerHTML = "<div class='text-center py-20'><p class='text-gray-500'>বর্তমানে কোনো লাইভ ম্যাচ পাওয়া যায়নি।</p><button onclick='location.reload()' class='mt-4 bg-gray-800 px-4 py-2 rounded-lg text-xs'>Refresh Now</button></div>";
        }
        fetchMatches();
    </script>
</body>
</html>
